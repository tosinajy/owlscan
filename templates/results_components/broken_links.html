<div class="accordion-item">
    <h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBrokenLinks">Broken Links <span class="badge bg-danger ms-2">{{ analysis.broken_links|length }}</span></button></h2>
    <div id="collapseBrokenLinks" class="accordion-collapse collapse" data-bs-parent="#resultsAccordion">
        <div class="accordion-body p-0">
            {% if analysis.broken_links %}<div class="table-responsive"><table class="table table-striped table-hover mb-0">
                <thead><tr><th>Found On Page (Source)</th><th>Broken Link (Target)</th><th>Anchor Text</th><th>Status</th></tr></thead>
                <tbody>{% for link in analysis.broken_links %}<tr>
                    <td class="text-break"><a href="{{ link.source_url }}" target="_blank">{{ link.source_url }}</a></td>
                    <td class="text-break"><a href="{{ link.target_url }}" target="_blank" class="text-danger">{{ link.target_url }}</a></td>
                    <td><em>{{ link.anchor_text if link.anchor_text else '(No Text)' }}</em></td>
                    <td><span class="badge bg-danger">{{ link.status_code if link.status_code != 0 else 'Error' }}</span></td>
                </tr>{% endfor %}</tbody>
            </table></div>{% else %}<div class="p-3">No broken internal links found.</div>{% endif %}
        </div>
    </div>
</div>